<!DOCTYPE html>
<html>
  <head>
    <script type="module" src="./index.js"></script>
    <style>
      local-iframe {
        margin-block: 1rem;
        display: block;
        max-width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <template id="template-1">
      <h1>Template 1</h1>
      <style>
        h1 {
          color: red;
        }
      </style>
    </template>
    <template id="template-2">
      <h1>Template 2</h1>
      <style>
        h1 {
          color: blue;
        }
      </style>
    </template>
    <h1><code>local-iframe</code> web component</h1>
    <local-iframe style="width: 800px; height: 200px;" template="template-1" id="dynamic-frame"></local-iframe>
    <local-iframe style="width: 800px; height: 400px;">
      <template>
        <link href="https://fonts.googleapis.com/css2?family=Ruge+Boogie&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap" rel="stylesheet">
        <div><h1>Hello, world!</h1></div>
        <p>This is awesome!</p>
        <script>
          console.log('hi');
        </script>
        <script>
          console.log('second console log in same iframe, but a second script tag');
        </script>
        <style>
          body {
            font-family: Ruge Boogie;
            background-color: red;
            font-size: 200%;
          }
        </style>
      </template>
    </local-iframe>
    <local-iframe style="width: 800px; height: 200px;">
      <template>
		    <h1>Counter demo</h1>
        <button>Increment</button>
        <div>
          Count: <output>0</output>
        </div>
        <script>
          const button = document.querySelector('button');
          const output = document.querySelector('output');
          button.addEventListener('click', () => {
            output.innerHTML = parseInt(output.innerHTML, 10) + 1;
          });
        </script>
      </template>
    </local-iframe>
    <local-iframe style="width: 800px; height: 200px;">
      <template>
        <h1>Another one! This one has a blue background.</h1>
        <style>
          body {
            background-color: #0000a8;
          }
          h1 {
            color: white;
          }
        </style>
      </template>
    </local-iframe>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <p>Paragraph from outer document!</p>
    <script>
      const frame = document.querySelector('#dynamic-frame');
      setInterval(() => {
        const currentTemplate = frame.getAttribute('template');
        const newTemplate = currentTemplate === 'template-1' ? 'template-2' : 'template-1';
        frame.setAttribute('template', newTemplate);
      }, 5000);
    </script>
  </body>
</html>
